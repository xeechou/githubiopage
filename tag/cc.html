<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Blog Project - C/C++</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Blog Project </a></h1>
                <nav><ul>
                    <li><a href="/category/diaries.html">Diaries</a></li>
                    <li><a href="/category/misc.html">misc</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/everything-you-do-i-can-do-it-with-a-double-pointer-in-c.html">Everything you do I can do it with a double pointer in C</a></h1>
<footer class="post-info">
        <abbr class="published" title="2016-08-21T00:00:00-04:00">
                Published: Sun 21 August 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/sichem-zhou.html">Sichem Zhou</a>
        </address>
<p>In <a href="/category/diaries.html">Diaries</a>.</p>
<p>tags: <a href="/tag/programming.html">programming</a> <a href="/tag/cc.html">C/C++</a> </p>
</footer><!-- /.post-info --><p>It is 2016, low level coding is not needed anymore. We have programming
languages like <code>javascript</code> and python. When people code everything with a class
and related methods. But do you remember we have a programming language called
C? When we had no class, templates, operator-override or implicit constructor at
that time. You actually know what are doing with C, no magic!</p>
<p>I claim no expert to programming, since I only have a four-year-old programming
life. But even you are inexperienced like me, you should still be able to code
some thing in C. IT IS fatigue to code in C, you have no standard containers to
rely on, you spend 10 hours to build a perfect <code>deque</code> data type which works on
amortized O(1) complexity and has no memory leaks before you are able to work on
your project. Awesome!!! But why? Why try to build a huge robust data structure
in a non-OOP language? Instead of trying simulate constructors and destructors,
you could always use a double pointer to do the job. Have you ever seen Linus
Torvalds's double pointer code? It removes on special case where you would make
mistakes.</p>
<p>But really? what can you do with a double pointer in C? Well, Suppose I have
<code>vector</code> data structure and I didn't want to write the code like this:</p>
<div class="highlight"><pre><span></span> struct vector {
     size_t elem_size;
     void *arr;
}
</pre></div>
<p>we can actually just use a simple array to do the job. If you just pass the
<code>void *</code> to insert function, how can I modify the size of the vector, or insert
anything before header? This should not be a problem with this:</p>
<div class="highlight"><pre><span></span>void insert(void **arr, void *elem, size_t *remain_size, size_t *size) {
    size_t old_size = *size;
    if (*remain_size == 0) {
        *arr = realloc(*arr, 2 * *size);
        *remain_size = *size;
        *size = 2;
    }
    *remain_size -= 1;

    //copy the elem to the end
}
</pre></div>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>