<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Template Deduction for C++ - Sichem Zhou's Blog Project</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="/template-deduction-for-c.html">

        <meta name="author" content="Sichem Zhou" />
        <meta name="keywords" content="programming,C/C++" />
        <meta name="description" content="Template is a confusing and hard features in C++ if you want use it well, and I think it is also one of the reason which causes c++ programmers cannot understand each other. Sometimes the Deduction rule for c++ is really confusing, you don&#39;t understand why you code doesn ..." />

        <meta property="og:site_name" content="Sichem Zhou's Blog Project" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Template Deduction for C++"/>
        <meta property="og:url" content="/template-deduction-for-c.html"/>
        <meta property="og:description" content="Template is a confusing and hard features in C++ if you want use it well, and I think it is also one of the reason which causes c++ programmers cannot understand each other. Sometimes the Deduction rule for c++ is really confusing, you don&#39;t understand why you code doesn ..."/>
        <meta property="article:published_time" content="2016-11-04" />
            <meta property="article:section" content="Programming" />
            <meta property="article:tag" content="programming" />
            <meta property="article:tag" content="C/C++" />
            <meta property="article:author" content="Sichem Zhou" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="/theme/css/pygments/native.css" rel="stylesheet">
    <link href="/theme/tipuesearch/tipuesearch.css" rel="stylesheet">
    <link rel="stylesheet" href="/theme/css/style.css" type="text/css"/>





</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
Sichem Zhou's Blog Project            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="/pages/about-me.html">
                             About Me
                          </a></li>
                        <li >
                            <a href="/category/chinese.html">Chinese</a>
                        </li>
                        <li >
                            <a href="/category/computer-vision.html">Computer vision</a>
                        </li>
                        <li >
                            <a href="/category/diaries.html">Diaries</a>
                        </li>
                        <li class="active">
                            <a href="/category/programming.html">Programming</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><span>
                <form class="navbar-search" action="/search.html">
                  <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input" required>
                </form></span>
              </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="/template-deduction-for-c.html"
                       rel="bookmark"
                       title="Permalink to Template Deduction for C++">
                        Template Deduction for C++
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2016-11-04T00:00:00-04:00"> Fri 04 November 2016</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="/tag/programming.html">programming</a>
        /
	<a href="/tag/cc.html">C/C++</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>Template is a confusing and hard features in C++ if you want use it well, and I
think it is also one of the reason which causes c++ programmers cannot
understand each other. Sometimes the Deduction rule for c++ is really confusing,
you don't understand why you code doesn't work or why it works. And Since
<strong>STL</strong> heavily uses nesting Templates, both your compiler and your mind suffers
from that.</p>
<h2>Function Templates</h2>
<p>People commonly start define and using templates for Container, such as
<code>std::vector</code> and <code>std::map</code>. Soon later, they want to write template functions
instead of overloading. The <code>sort</code> function from standard library is a good
example. It is usually defined as:</p>
<div class="highlight"><pre><span></span>template&lt;class RandomIt&gt; void sort(RandomIt&amp; first, RandomIt&amp; last).
</pre></div>
<p>Then you can sort a <code>vector</code> by:</p>
<div class="highlight"><pre><span></span><span class="nt">std</span><span class="o">:</span><span class="nd">:vector</span><span class="o">&lt;</span><span class="nt">float</span><span class="o">&gt;</span> <span class="nt">a</span> <span class="o">=</span> <span class="o">...;</span>
<span class="nt">std</span><span class="o">:</span><span class="nd">:sort</span><span class="o">(</span><span class="nt">a</span><span class="nc">.begin</span><span class="o">(),</span> <span class="nt">a</span><span class="nc">.end</span><span class="o">())</span>
</pre></div>
<p>The compilers try to infer the template parameters from template functions'
parameters. Sometimes compilers are not smart enough to deduce it out, then you
have to specific it yourself. The deducing mechanism is a choice of
compilers. For example, compilers never tries to deduce the type for a class
template. Compilers deduction policy is hard to implement, and quite often, I
blame for compiler's stupidity for not be able to deducing the templates(but of
course, the guys that wrote compiler usually smart than us). But for us, we need
to know when we don't need to specific the template parameters, when we will
need to. According to <a href="http://en.cppreference.com/w/cpp/language/template_argument_deduction" title="Template Deduction">CPP Reference</a>, the difference is there are some
context participate into deduction, others does not. </p>
<ul>
<li>Template deduction for template functions can be done with function arguments.</li>
<li>Compiler never deduce templates for class.</li>
<li>Template deduction cannot be done with return types.</li>
<li>Nested types such as <code>std::vector&lt;std::complex&lt;double&gt; &gt;</code> can causes troubles. </li>
<li>A template type that uses another template, like <code>F&amp; (*function)(T l, T r)</code>,
  here <code>F</code> is not deductible.</li>
<li>And there are many other rules.</li>
</ul>
<p>Looks like now, the deduction can only be done with direct type that list in code.</p>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Related Posts:</h4>
    <ul>
        <li><a href="/alternative-usage-to-typedef-in-c.html">Alternative usage to `typedef` in C</a></li>
        <li><a href="/everything-you-do-i-can-do-it-with-a-double-pointer-in-c.html">Everything you do I can do it with a double pointer in C</a></li>
        <li><a href="/6-years-of-programming.html">6 years of programming</a></li>
    </ul>
</section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://ca.linkedin.com/in/sichem-zhou-4b0113b9"><i class="fa fa-linkedin-square fa-lg"></i> Linkedin</a></li>
                <li class="list-group-item"><a href="https://github.com/xeechou"><i class="fa fa-github-square fa-lg"></i> Github</a></li>
                <li class="list-group-item"><a href="https://xeechou.blogspot.ca"><i class="fa fa-yab-square fa-lg"></i> YAB</a></li>
              </ul>
            </li>





    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://theictlab.org" target="_blank">
                theICTlab
            </a>
        </li>
      </ul>
    </li>
    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2016 Sichem Zhou
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/theme/js/respond.min.js"></script>


</body>
</html>